import{d as D,r as V,k as z,o as F,i as H,a as b,c as w,b as g,e as _,w as u,j as k,F as A,A as B,I as J,B as K,E as O,s as W,t as Z,_ as q}from"./index-4d77b520.js";const G=C=>(W("data-v-7bdb86d3"),C=C(),Z(),C),Q={class:"wrap flex-col"},R=G(()=>g("div",{style:{padding:"20px 0 0 20px"}},[k(" 规则： "),g("span",{style:{color:"red"}}," 1、手动设置起点（红色）和终点（蓝色），障碍（绿色）随便设置，点击开始自动寻路至终点 ")],-1)),U={class:"btnBox flex-row jc-between"},X={class:"box"},Y=["onClick"],P=D({__name:"pathSearch",setup(C){let x=15,v=20;const a={normal:0,start:1,end:2,lock:3,path:4,temp:5};let f,d;const e=V({map:[],clickType:0,isStart:!1,showPath:!1}),T=z(),$=()=>{const s=T.value,t=s.clientWidth;x=~~(s.clientHeight/50),v=~~(t/50),e.map=new Array(x).fill(0).map(()=>new Array(v).fill(a.normal)),new Array(x).fill(0).map(()=>new Array(v).fill(a.normal))};F(()=>{$(),x>9&&v>14&&[[1,0,0,0,0,3,0,0,0,0,0,0,0,3,3,3],[0,3,0,3,0,3,0,0,0,0,3,3,0,0,0,3],[0,0,0,3,0,0,0,3,3,3,0,3,3,3,0,3],[0,3,3,3,0,3,0,3,0,0,0,3,0,0,0,0],[0,3,0,0,0,3,0,0,3,0,0,3,3,3,3,0],[0,3,0,3,0,0,3,0,0,0,3,0,3,0,3,0],[0,3,0,3,0,0,3,0,3,0,0,3,0,0,3,0],[0,3,0,0,0,0,0,0,3,0,0,0,0,0,3,0],[0,0,0,0,3,0,3,3,3,2,3,3,0,0,3,0],[0,0,3,0,3,0,0,0,0,0,0,3,0,0,0,0],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]].forEach((t,n)=>t.forEach((l,c)=>{l&&e.map[n][c]!==void 0&&(l===a.start&&(f=[n,c]),l===a.end&&(d=[n,c]),e.map[n][c]=l)}))});const L=s=>{e.clickType=s},E=(s,t)=>{switch(e.clickType){case 1:f&&(e.map[f[0]][f[1]]=a.normal),f=[s,t],e.map[s][t]=a.start;break;case 2:e.map[s][t]===a.lock?e.map[s][t]=a.normal:e.map[s][t]=a.lock;break;case 3:d&&(e.map[d[0]][d[1]]=a.normal),d=[s,t],e.map[s][t]=a.end;break}},M=()=>{e.map.forEach((s,t)=>s.forEach((n,l)=>{[a.end,a.start,a.lock].includes(e.map[t][l])||(e.map[t][l]=a.normal)}))},I=()=>{if(e.isStart)return;if(!f||!d)return O.warn("请设置起点和终点");e.isStart=!0,M();const s={x:f[0],y:f[1]},t={x:d[0],y:d[1]};let n=null;function l(r,i,o){if(e.map[o.x][o.y]===a.temp||e.map[o.x][o.y]===a.start)return;if(o.x===t.x&&o.y===t.y){i+=o.x+","+o.y,n=i.split(";");return}e.map[o.x][o.y]=a.temp,c(o).length&&r.push({haveJ:i+o.x+","+o.y+";",canMoveList:c(o)})}function c(r){const{x:i,y:o}=r,m=[];for(let h=1;h<5;h++){let p=i,y=o;switch(h){case 1:y--;break;case 2:p++;break;case 3:y++;break;case 4:p--;break}p<0||p>x-1||y<0||y>v-1||e.map[p][y]!==a.lock&&e.map[p][y]!==a.temp&&m.push({x:p,y})}return m}function S(r){let i=!1;const o=[];for(;r.length;){const m=r.shift();if(m.canMoveList.length){i=!0;for(let h=0;h<m.canMoveList.length;h++){const p=m.canMoveList[h];if(l(o,m.haveJ,p),n)return N(n)}}}i?setTimeout(()=>{S(o)},100):(alert("到不了"),M(),e.isStart=!1)}S([{haveJ:s.x+","+s.y+";",canMoveList:c(s)}])},N=s=>{M(),e.isStart=!1;for(let t=0;t<s.length;t++){const n=s[t].split(","),l=n[0],c=n[1];[a.start,a.end].includes(e.map[l][c])||(e.map[l][c]=a.path)}};return(s,t)=>{const n=H("a-button");return b(),w("div",Q,[R,g("div",U,[_(n,{onClick:t[0]||(t[0]=l=>L(1)),type:e.clickType===1?"primary":"default"},{default:u(()=>[k("设置起点（1个）")]),_:1},8,["type"]),_(n,{onClick:t[1]||(t[1]=l=>L(2)),type:e.clickType===2?"primary":"default"},{default:u(()=>[k("设置障碍（不限）")]),_:1},8,["type"]),_(n,{onClick:t[2]||(t[2]=l=>L(3)),type:e.clickType===3?"primary":"default"},{default:u(()=>[k("设置终点（1个）")]),_:1},8,["type"]),_(n,{onClick:t[3]||(t[3]=l=>e.showPath=!e.showPath)},{default:u(()=>[k("查看坐标")]),_:1}),_(n,{onClick:$},{default:u(()=>[k("重置")]),_:1}),_(n,{onClick:I},{default:u(()=>[k("开始")]),_:1})]),g("div",{class:"flex-col ai-center jc-center flex",ref_key:"box",ref:T},[g("div",X,[(b(!0),w(A,null,B(e.map,(l,c)=>(b(),w("div",{class:"row",key:c},[(b(!0),w(A,null,B(l,(S,r)=>(b(),w("div",{class:J(["block",`block${S}`]),key:`${c},${r}`,onClick:i=>E(c,r)},K(e.showPath?`${c},${r}`:""),11,Y))),128))]))),128))])],512)])}}});const ee=q(P,[["__scopeId","data-v-7bdb86d3"]]);export{ee as default};
