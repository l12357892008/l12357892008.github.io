import{_ as k,k as T,o as A,q,a as F,c as I,b as W}from"./index-4d77b520.js";const b={__name:"pixelDivide",setup(B){const h=T(),D=T();let S;return A(()=>{const d=D.value.clientWidth-10,c=D.value.clientHeight-10,g=200,m=4;let f=[],l=[];const _=h.value;_.style.width=_.width=d,_.style.height=_.height=c;const s=_.getContext("2d");s.font=g+"px Times New Roman";function u(a,e){return Math.floor(Math.random()*(e-a)+a)}function y(){return`rgb(${u(0,200)},${u(0,200)},${u(0,200)})`}function x(a,e,n,t){return-n*(a/=t)*(a-2)+e}function C(a,e,n,t){const o=s.getImageData(a,e,n,t),w=o.data;n=o.width,f=l,l=[];const p=m+1;let i=0;for(let v=0;v<t;v=v+p){const M=v*n*4;for(let X=3;X<n*4;X=X+4*p)if(w[M+X]>0){const r={endX:a+parseInt(X/4)+1,endY:e+v};f[i]?(r.color=f[i].color,r.startX=f[i].startX,r.startY=f[i].startY):(r.color=y(),r.startX=u(0,d),r.startX>a-t/2&&r.startX<a+n+t/2?r.startY=Math.random()>.5?u(0,e-t/2):u(e+t*3/2,c):r.startY=u(0,c)),l.push(r),i++}}s.clearRect(0,0,d,c)}function R(){const a=new Date,e=a.getHours(),n=a.getMinutes(),t=a.getSeconds();let o=(e>9?e:"0"+e)+":";o+=(n>9?n:"0"+n)+":",o+=t>9?t:"0"+t;const w=s.measureText(o).width,p=d/2-w/2,i=c/2+g/2;s.clearRect(0,0,d,c),s.fillText(o,p,i),C(p,i-g,w,g)}function Y(a){if(l.isStart||(Y.startTime=a,l.isStart=!0),l.length>0){s.fillStyle="rgba(255,255,255,0.2)",s.fillRect(0,0,d,c);const e=a-Y.startTime;if(e<=700)for(let n=0;n<f.length;n++){const t=f[n];s.fillStyle=t.color,s.fillRect(x(e,t.endX,t.startX-t.endX,700),x(e,t.endY,t.startY-t.endY,700),m,m)}else{const n=Math.min(e-700,500);for(let t=0;t<l.length;t++){const o=l[t];s.fillStyle=o.color,s.fillRect(x(n,o.startX,o.endX-o.startX,500),x(n,o.startY,o.endY-o.startY,500),m,m)}}e>=2e3&&R()}else R();S=requestAnimationFrame(Y)}S=requestAnimationFrame(Y)}),q(()=>{cancelAnimationFrame(S)}),(d,c)=>(F(),I("div",{class:"wrap",ref_key:"wrap",ref:D},[W("canvas",{ref_key:"canvas",ref:h},null,512)],512))}},H=k(b,[["__scopeId","data-v-311110de"]]);export{H as default};
