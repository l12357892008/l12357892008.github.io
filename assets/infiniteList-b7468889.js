import{_ as N,j as a,l as E,o as k,c as T,a as r}from"./index-48cad54f.js";const w={class:"scrollWrap"},B={__name:"infiniteList",setup(L){const p=a(),s=a(),u=a(),d=a();return E(()=>{const v=t=>{t.forEach(e=>{e.target.className==="top"?e.isIntersecting&&x(i):e.target.className==="footer"&&e.isIntersecting&&y(i)})};let c=0,m=0;const x=async t=>{if(c<=0)return;const e=d.value,l=e.scrollTop,o=document.createElement("div");for(let g=0;g<t;g++){const _=document.createElement("div");_.className="infinite-list-item",_.innerHTML=--c,o.insertAdjacentElement("afterbegin",_)}s.value.insertAdjacentElement("afterbegin",o),e.scrollTop=l+f,I(i)},y=async t=>{const e=document.createElement("div");for(let o=0;o<t;o++){const n=document.createElement("div");n.className="infinite-list-item",n.innerHTML=m++,e.appendChild(n)}const l=s.value;if(l.appendChild(e),m-c>3*i&&h(i),!f){const o=l.childNodes[0],n=window.getComputedStyle(o,null);f=o.offsetHeight+parseFloat(n.marginTop)+parseFloat(n.marginBottom)}},h=t=>{c+=t,s.value.childNodes[0].remove()},I=t=>{m-=t;const e=s.value.childNodes;e[e.length-1].remove()};let f=null,i=30;const b=new IntersectionObserver(v,{root:d.value});b.observe(u.value),b.observe(p.value)}),(v,c)=>(k(),T("div",{class:"wrap",ref_key:"wrap",ref:d},[r("div",w,[r("div",{class:"top",ref_key:"top",ref:p},null,512),r("div",{class:"box",ref_key:"box",ref:s},null,512),r("div",{class:"footer",ref_key:"footer",ref:u},null,512)])],512))}},H=N(B,[["__scopeId","data-v-12b97be6"]]);export{H as default};
