import{S as $}from"./SettingOutlined-df28a043.js";import{d as q,k as M,r as F,o as N,q as D,i as _,a as L,c as O,b as P,e as p,z as T,w as x,_ as U}from"./index-4d77b520.js";const a=10,X=2,Y=.995,V=.995,z=q({__name:"bounceBall",setup(E){let r=1e3,s=500,u=[],l;const c=M(),f=M();function d(e,n){return Number((Math.random()*(n-e)+e).toFixed(2))}function h(){return d(-40,40)}function y(){return`rgb(${parseInt(String(d(0,255)))},${parseInt(String(d(0,255)))},${parseInt(String(d(0,255)))})`}function b(e){u=[],e=Math.min(e,1e4-u.length);for(let n=0;n<e;n++)u.push({x:r/2,y:s/2,speedX:h(),speedY:h(),color:y()})}function k(e){e.stopX||(e.x<=0+a||e.x>=r-a)&&(e.x=Math.max(e.x,0+a),e.x=Math.min(e.x,r-a),e.speedX=-e.speedX*Y),e.stopY||(e.y<=0+a||e.y>=s-a)&&(e.y=Math.max(e.y,0+a),e.y=Math.min(e.y,s-a),e.speedY=-e.speedY*Y)}function B(e){e.speedY+=X,e.y===s-a&&Math.abs(e.speedY)<=X/2&&(e.stopY=!0,e.speedY=0)}function C(e){e.speedX*=V,Math.abs(e.speedX)<=.1&&(e.stopX=!0,e.speedX=0)}let g=0;function w(e){const n=Math.min(16.66,e-g)/16.66;g=e,l.clearRect(0,0,r,s);for(let i=0;i<u.length;i++){const t=u[i];l.beginPath(),l.arc(t.x,t.y,10,0,2*Math.PI),l.fillStyle=t.color,l.fill(),t.x+=t.speedX*n,t.y+=t.speedY*n,k(t),t.stopY||B(t),t.stopX||C(t)}m=requestAnimationFrame(w)}let m;const o=F({num:150,show:!1});N(()=>{!c.value||!f.value||(r=f.value.clientWidth*.9,s=f.value.clientHeight*.85,c.value.width=r,c.value.height=s,l=c.value.getContext("2d"),l.fillStyle=y(),b(o.num),m=requestAnimationFrame(w))}),D(()=>{cancelAnimationFrame(m)});const S=()=>{o.show=!1,b(o.num)};return(e,n)=>{const i=_("a-input-number"),t=_("a-form-item"),I=_("a-form"),A=_("a-modal");return L(),O("div",{class:"wrap flex-center",ref_key:"wrapDom",ref:f},[P("canvas",{class:"canvas",ref_key:"canvas",ref:c},null,512),p(T($),{class:"setting",onClick:n[0]||(n[0]=v=>o.show=!0)}),p(A,{open:o.show,title:"修改配置","ok-text":"确定","cancel-text":"取消",onCancel:n[2]||(n[2]=v=>o.show=!1),onOk:S},{default:x(()=>[p(I,null,{default:x(()=>[p(t,{label:"小球数量"},{default:x(()=>[p(i,{id:"inputNumber",value:o.num,"onUpdate:value":n[1]||(n[1]=v=>o.num=v),min:1,max:2e3,step:10,precision:0},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open"])],512)}}});const W=U(z,[["__scopeId","data-v-b7f91747"]]);export{W as default};
