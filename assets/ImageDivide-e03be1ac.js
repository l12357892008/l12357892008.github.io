import{_ as y,r as I,j as D,l as b,o as $,c as C,a,v as p,x as d,A as h,i as j,D as T,E as V,q as E,s as R}from"./index-48cad54f.js";const W=""+new URL("bg-88ece29e.jpeg",import.meta.url).href;const g=c=>(E("data-v-3e1c3d40"),c=c(),R(),c),k={class:"wrap flex-center"},H={class:"controls"},N={class:"row"},S=g(()=>a("span",{class:"title"},"行数",-1)),U={id:"rowValue",class:"value"},B={class:"row"},G=g(()=>a("span",{class:"title"},"列数",-1)),L={id:"colValue",class:"value"},M={class:"row"},P=g(()=>a("span",{class:"title"},"间隙",-1)),A={id:"gapValue",class:"value"},J={class:"fileBtn"},q={__name:"ImageDivide",setup(c){const o=I({row:5,col:5,gap:3}),u=D();class _{constructor(e,t="./img/1.jpg",s=3,i=3,r=1){this.dom=e,this.src=t,this.preImg(this.src,()=>{this.change(s,i,r)})}render(){this.sliceW=(this.w-(this.col-1)*this.gap)/this.col>>0,this.sliceH=(this.h-(this.row-1)*this.gap)/this.row>>0,this.dom.style.cssText=`transform: translate(-50%, -50%) scale(${this.scaleRate});`;const e=document.createElement("div");for(let t=0;t<this.row;t++){const s=document.createElement("div");s.setAttribute("class","rowDom");for(let i=0;i<this.col;i++){const r=document.createElement("div");if(r.style.cssText=`
                    width: ${this.sliceW}px;
                    height: ${this.sliceH}px;
                    background: url('${this.src}');
                    background-position: -${this.sliceW*i+this.gap*i}px -${this.sliceH*t+this.gap*t}px;
                    border-radius: 3%;
                    animation: swing-in-left-fwd 0.5s cubic-bezier(0.175, 0.885, 0.320, 1.275) ${t*.025}s forwards;
                    opacity: 0;
                `,s.append(r),i<this.col-1){const m=document.createElement("div");m.style.cssText=`width: ${this.gap}px;`,s.append(m)}}if(e.append(s),t<this.row-1){const i=document.createElement("div");i.style.cssText=`height: ${this.gap}px;`,e.append(i)}}this.dom.innerHTML=e.innerHTML}change(e,t,s){if(e=Number(e),t=Number(t),s=Number(s),!(e&&t&&s))return console.warn("请输入有效参数");const i=/[^0-9]/g;if(i.test(e)||i.test(t)||i.test(s))return console.warn("请输入有效参数");this.row=e,this.col=t,this.gap=s,this.render()}updateRow(e){this.change(e,this.col,this.gap)}updateCol(e){this.change(this.row,e,this.gap)}updateGap(e){this.change(this.row,this.col,e)}preImg(e,t){const s=new Image;s.onload=s.onerror=()=>{this.w=s.width,this.h=s.height,this.scaleRate=700/this.h,t()},s.src=e}updateImg(e){this.src=e,this.preImg(this.src,()=>{this.render()})}}let n;function w(){n.updateRow(o.row)}function v(){n.updateCol(o.col)}function f(){n.updateGap(o.gap)}function x(l){const e=l.target.files[0];if(!["image/png","image/jpg","image/jpeg"].includes(e.type))return T.warn("只允许上传,jpg,jpeg,png格式的文件");const i=V(e);n.updateImg(i)}return b(()=>{n=new _(u.value,W,5,5,3)}),(l,e)=>($(),C("div",k,[a("div",{class:"picWrap",ref_key:"picWrap",ref:u},null,512),a("div",H,[a("div",N,[S,p(a("input",{type:"range","onUpdate:modelValue":e[0]||(e[0]=t=>o.row=t),min:"1",max:"10",onChange:w},null,544),[[d,o.row]]),a("span",U,h(o.row),1)]),a("div",B,[G,p(a("input",{type:"range","onUpdate:modelValue":e[1]||(e[1]=t=>o.col=t),min:"1",max:"10",onChange:v},null,544),[[d,o.col]]),a("span",L,h(o.col),1)]),a("div",M,[P,p(a("input",{type:"range","onUpdate:modelValue":e[2]||(e[2]=t=>o.gap=t),min:"1",max:"10",onChange:e[3]||(e[3]=t=>f())},null,544),[[d,o.gap]]),a("span",A,h(o.gap),1)])]),a("div",J,[a("input",{type:"file",onChange:x},null,32),j(" 更改图片 ")])]))}},F=y(q,[["__scopeId","data-v-3e1c3d40"]]);export{F as default};
