import{_ as A,k as f,o as B,q as P,a as V,c as D,x as R,y as S,b as w}from"./index-4d77b520.js";const M=3,U=1,F=20,b=80,X={__name:"particleFont",setup(Y){const m=f(),d=f(),p=f("");let s,a=0,l=0;const c=[],x=["rgba(255, 255, 255, 0.7)","rgba(255, 255, 255, 0.1)"];let y=!0;const n={x:-1e3,y:-1e3};function k(e,t,i,r){return Math.sqrt((i-e)*(i-e)+(r-t)*(r-t))}let v;class I{constructor(t,i,r,h,u){this.pos=t,this.target=i,this.vel=r,this.color=h,this.radius=u;var o=[-1,1];this.direction=o[~~(Math.random()*2)]*Math.random()/10}update(){this.radius+=this.direction,this.vel.x=(this.pos.x-this.target.x)/F,this.vel.y=(this.pos.y-this.target.y)/F,k(this.pos.x,this.pos.y,n.x,n.y)<50&&(this.vel.x+=this.vel.x-(this.pos.x-n.x)/15,this.vel.y+=this.vel.y-(this.pos.y-n.y)/15),this.radius>=M&&(this.direction*=-1),this.radius<=1&&(this.direction*=-1),this.pos.x-=this.vel.x,this.pos.y-=this.vel.y,this.draw()}draw(){s.beginPath(),s.fillStyle=this.color,s.arc(this.pos.x,this.pos.y,this.radius,0,Math.PI*2),s.fill()}}const q=()=>{g(p.value)};function g(e){e=e||"请输入文本",s.clearRect(0,0,a,l);let t=0,i,r,h;s.fillStyle="rgb(255, 255, 255)",s.font=b+"px -apple-system",s.fillText(e,a/2-s.measureText(e).width/2,l/2+b/2);let u=s.getImageData(0,0,a,l).data;for(let o=0;o<u.length;o+=4){i={x:o/4%a,y:~~(o/4/a)};//!= 比较时，若类型不同，会偿试转换类型。
//!== 只有相同类型才会比较。
u[o]!==0&&~~(Math.random()*5)==1&&(t<c.length?c[t].target=i:(r=M-Math.random()*U,y||(i={x:Math.random()*a,y:Math.random()*l}),h=x[~~(Math.random()*x.length)],c.push(new I(i,{x:o/4%a,y:~~(o/4/a)},{x:0,y:0},h,r))),++t)}y=!1,c.splice(t,c.length-t)}function T(){s.clearRect(0,0,a,l);for(let e of c)e.update()}function _(){v=window.requestAnimationFrame(_),T()}return B(()=>{a=d.value.clientWidth,l=d.value.clientHeight;const e=m.value;e.style.width=e.width=a,e.style.height=e.height=l,s=e.getContext("2d"),e.onmousemove=function(t){console.log(123,t),n.x=t.offsetX,n.y=t.offsetY},e.ontouchmove=function(t){n.x=t.touches[0].clientX,n.y=t.touches[0].clientY},g("鼠标掠过我或在上方输入新文本"),_()}),P(()=>{cancelAnimationFrame(v)}),(e,t)=>(V(),D("div",{class:"wrap",ref_key:"wrap",ref:d},[R(w("input",{ref:"input",class:"input","onUpdate:modelValue":t[0]||(t[0]=i=>p.value=i),type:"text",maxlength:"8",onInput:q},null,544),[[S,p.value]]),w("canvas",{ref_key:"canvas",ref:m},null,512)],512))}},E=A(X,[["__scopeId","data-v-e52ff304"]]);export{E as default};
